# Phialka backend

## Project structure

The project is divided into modules, according to the subdomain areas:
- Auth: authentication and authorization services.
- Users: user profile services.
- Files: files storing, uploading and downloading services.
- Servers: server management services.
- Channels: channel management services.
- Private_chats: private chats management services.
- Messages: messaging service.

Each module has the following structure:
- schemas.py - main dataclasses, used in the app business logic.
- apstracts.py - interfaces, used in the service use cases.
- use_cases.py - service use cases; direct functions of the service, can be used from external services.
- adapters.py - implementation of interfaces that are used in use cases.
- routers.py - REST API routers for this service.
- dbmodels.py - database models for service entities.

### Data model

**ER diagram**:

![alt text](docs/images/main_ERD.png)



## Application launch

### Using docker compose (you must be in project root directory)

```
docker compose up
```

### Without docker compose

```bash
pip install -r requirements.txt
```

```bash
python app/main.py
```

> *You must have postgresql server running in your pc\
> Specify it in the .env file
> ```
> DATABASE_URL=postgresql://you_user:you_password@database:5432/test_db
> ```



## Enjoy

Visit a localhost in your browser - here you will see the API documentation generated by Swagger UI.
You can examine format of request and responses and you can test the endpoints.

![alt text](docs/images/image.png)
